"use strict";(self.webpackChunkmas_playbook=self.webpackChunkmas_playbook||[]).push([[4296],{7524:function(e,t,A){A.r(t),A.d(t,{_frontmatter:function(){return o},default:function(){return c}});var a=A(3366),i=(A(7294),A(4983)),n=A(4295),r=["components"],o={},s={_frontmatter:o},l=n.Z;function c(e){var t=e.components,A=(0,a.Z)(e,r);return(0,i.kt)(l,Object.assign({},s,A,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"When retrieving data, the REST API framework provides multiple ways to filter the data returned. Some of the options can be found here: ",(0,i.kt)("a",{parentName:"p",href:"https://community.ibm.com/HigherLogic/System/DownloadDocumentFile.ashx?DocumentFileKey=9408db2d-2f55-804e-5d92-48038faf258e&forceDialog=0"},"REST API Query Documentation")),(0,i.kt)("p",null,"When the existing options are insufficient you can utilize an object structure query automation script. For example, if you wanted to retrieve all WOs in an INPRG status that referenced a particular ASSET or LOCATION you would want to generate a SQL statement like:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sql"},"historyflag=0 and istask=0 and status='INPRG' and (location='BR430' or assetnum='11430')\n")),(0,i.kt)("p",null,"Until Manage 8.3/Maximo 7.6.1.3, utilizing the oslc.where would not allow you to combine AND and OR statements in the where clause. "),(0,i.kt)("h2",null,"Implicit variables"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:"left"},"Variable name"),(0,i.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:"left"},"mboset"),(0,i.kt)("td",{parentName:"tr",align:"left"},"This is the MboSet for the main object of your object structure. You utilize this to set the where clause that gets applied.")))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Step 1")," Create an Automation Script for Integration. Choose Object Structure, select the object structure in question, and give it a unique Query Name\n",(0,i.kt)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1105px"}},"\n      ",(0,i.kt)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"61.11111111111111%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHedbJCD//EABYQAAMAAAAAAAAAAAAAAAAAABARIP/aAAgBAQABBQKGP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABgQAQEAAwAAAAAAAAAAAAAAAAEAEBEx/9oACAEBAAE/ITDDOhwhv//aAAwDAQACAAMAAAAQow//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAEBAAMBAQAAAAAAAAAAAAABABExUSFB/9oACAEBAAE/EFg197D1vTudMoSIkZDRf//Z')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,i.kt)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"Query Script Creation",title:"Query Script Creation",src:"/maximo-autoscript-documentation/static/0c6122df7b4347cb538a6af4fcd457a3/8bcb7/osquerydefinition.jpg",srcSet:["/maximo-autoscript-documentation/static/0c6122df7b4347cb538a6af4fcd457a3/69549/osquerydefinition.jpg 288w","/maximo-autoscript-documentation/static/0c6122df7b4347cb538a6af4fcd457a3/473e3/osquerydefinition.jpg 576w","/maximo-autoscript-documentation/static/0c6122df7b4347cb538a6af4fcd457a3/8bcb7/osquerydefinition.jpg 1105w"],sizes:"(max-width: 1105px) 100vw, 1105px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy",decoding:"async"}),"\n    ")," "),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Step 2")," Add Variables to the script that you want to be provided as query parameters (sqp:variable). These need to be defined as Literal variables with a value (such as * in our example). If the query parameter is not provided, the literal value defined on the script is used.\n",(0,i.kt)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"783px"}},"\n      ",(0,i.kt)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"30.555555555555554%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHauJIX/8QAGBAAAwEBAAAAAAAAAAAAAAAAAAERAhL/2gAIAQEAAQUCw+lCH//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABYQAAMAAAAAAAAAAAAAAAAAAAEQEf/aAAgBAQAGPwKh/wD/xAAXEAEAAwAAAAAAAAAAAAAAAAABEBEh/9oACAEBAAE/IQ3Aub//2gAMAwEAAgADAAAAEHwP/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQMBAT8QJ//EABYRAAMAAAAAAAAAAAAAAAAAAAEQMf/aAAgBAgEBPxA1f//EABoQAAICAwAAAAAAAAAAAAAAAAABEVExcaH/2gAIAQEAAT8QyaBQ1QrM24f/2Q==')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,i.kt)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"Query Script Variables",title:"Query Script Variables",src:"/maximo-autoscript-documentation/static/1679e0eb2892210816b03d43a444d020/c4bbf/osqueryvariables.jpg",srcSet:["/maximo-autoscript-documentation/static/1679e0eb2892210816b03d43a444d020/69549/osqueryvariables.jpg 288w","/maximo-autoscript-documentation/static/1679e0eb2892210816b03d43a444d020/473e3/osqueryvariables.jpg 576w","/maximo-autoscript-documentation/static/1679e0eb2892210816b03d43a444d020/c4bbf/osqueryvariables.jpg 783w"],sizes:"(max-width: 783px) 100vw, 783px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy",decoding:"async"}),"\n    ")," "),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Step 3")," Create the Query Definition for the Script. In the Object Structure application you’ll need to add the query with a type of “script”, select the script name, and provide it a description. "),(0,i.kt)("h2",null,"Example Script"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'def isSet(variable):\n    return variable and variable!=\'*\'\n\nfrom psdi.mbo import SqlFormat\nquery="historyflag=0 and istask=0 "\nif isSet(assetnum) and isSet(location):\n    query+=" and (assetnum=:1 or location=:2) "\nelif isSet(assetnum):\n    query+=" and assetnum=:1 "\nelif isSet(location):\n    query+=" and location=:2 "\nif isSet(status):\n    query+= " and status=:3 "\nsqf=SqlFormat(query)\n\n# Check that values are set before calling setObject or it fail\nif isSet(assetnum):\n    sqf.setObject(1,"WORKORDER","ASSETNUM",assetnum)\nif isSet(location):\n    sqf.setObject(2,"WORKORDER","LOCATION",location)\nif isSet(status):\n    sqf.setObject(3,"WORKORDER","STATUS",status)\n\nmboset.setWhere(sqf.format())\n')),(0,i.kt)("p",null,"Call with a GET request like: "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"https://myurl.com/maximo/oslc/os/mxapiwodetail?lean=1&oslc.select=wonum,description,siteid&oslc.pageSize=40&savedQuery=OSQUERY.MXAPIWODETAIL.EMXWOFILTER&sqp:assetnum=11430&sqp:location=BR430\n")))}c.isMDXComponent=!0},4295:function(e,t,A){A.d(t,{Z:function(){return y}});var a=A(7294),i=A(8650),n=A.n(i),r=A(5444),o=A(6949),s=A(3293),l=A(5900),c=A.n(l),m=function(e){var t,A=e.title,i=e.theme,n=e.tabs,r=void 0===n?[]:n;return a.createElement("div",{className:c()("PageHeader-module--page-header--NqfPe",(t={},t["PageHeader-module--with-tabs--vbQ-W"]=r.length,t["PageHeader-module--dark-mode--WCeH8"]="dark"===i,t))},a.createElement("div",{className:"bx--grid"},a.createElement("div",{className:"bx--row"},a.createElement("div",{className:"bx--col-lg-12"},a.createElement("h1",{id:"page-title",className:"PageHeader-module--text--Er2EO"},A)))))},u=function(e){var t=e.relativePagePath,A=e.repository,i=(0,r.useStaticQuery)("1364590287").site.siteMetadata.repository,n=A||i,o=n.baseUrl,s=n.subDirectory,l=o+"/edit/"+n.branch+s+"/src/pages"+t;return o?a.createElement("div",{className:"bx--row EditLink-module--row--BEmSX"},a.createElement("div",{className:"bx--col"},a.createElement("a",{className:"EditLink-module--link--IDrl1",href:l},"Edit this page on GitHub"))):null},d=A(4275),p=A(1721),g=function(e){function t(){return e.apply(this,arguments)||this}return(0,p.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.title,A=e.tabs,i=e.slug,o=i.split("/").filter(Boolean).slice(-1)[0],s=A.map((function(e){var t,A=n()(e,{lower:!0,strict:!0}),s=A===o,l=new RegExp(o+"/?(#.*)?$"),m=i.replace(l,A);return a.createElement("li",{key:e,className:c()((t={},t["PageTabs-module--selected-item--aBB0K"]=s,t),"PageTabs-module--list-item--024o6")},a.createElement(r.Link,{className:"PageTabs-module--link--Kz-7R",to:""+m},e))}));return a.createElement("div",{className:"PageTabs-module--tabs-container--Cdfzw"},a.createElement("div",{className:"bx--grid"},a.createElement("div",{className:"bx--row"},a.createElement("div",{className:"bx--col-lg-12 bx--col-no-gutter"},a.createElement("nav",{"aria-label":t},a.createElement("ul",{className:"PageTabs-module--list--xLqxG"},s))))))},t}(a.Component),b=g,E=A(2881),h=A(6958),f=A(36),N=function(e){var t=e.date,A=new Date(t);return t?a.createElement(f.X2,{className:"last-modified-date-module--row--XJoYQ"},a.createElement(f.sg,null,a.createElement("div",{className:"last-modified-date-module--text--ogPQF"},"Page last updated: ",A.toLocaleDateString("en-GB",{day:"2-digit",year:"numeric",month:"long"})))):null},y=function(e){var t=e.pageContext,A=e.children,i=e.location,l=e.Title,c=t.frontmatter,p=void 0===c?{}:c,g=t.relativePagePath,f=t.titleType,y=p.tabs,B=p.title,Q=p.theme,k=p.description,w=p.keywords,j=p.date,x=(0,h.Z)().interiorTheme,v=(0,r.useStaticQuery)("2456312558").site.pathPrefix,S=v?i.pathname.replace(v,""):i.pathname,D=y?S.split("/").filter(Boolean).slice(-1)[0]||n()(y[0],{lower:!0}):"",R=Q||x;return a.createElement(s.Z,{tabs:y,homepage:!1,theme:R,pageTitle:B,pageDescription:k,pageKeywords:w,titleType:f},a.createElement(m,{title:l?a.createElement(l,null):B,label:"label",tabs:y,theme:R}),y&&a.createElement(b,{title:B,slug:S,tabs:y,currentTab:D}),a.createElement(E.Z,{padded:!0},A,a.createElement(u,{relativePagePath:g}),a.createElement(N,{date:j})),a.createElement(d.Z,{pageContext:t,location:i,slug:S,tabs:y,currentTab:D}),a.createElement(o.Z,null))}}}]);
//# sourceMappingURL=component---src-pages-rest-osquery-mdx-7fbc599f2a645142a46d.js.map