{
    "componentChunkName": "component---src-pages-integration-endpointhandler-mdx",
    "path": "/integration/endpointhandler/",
    "result": {"pageContext":{"frontmatter":{"title":"Endpoint script"},"relativePagePath":"/integration/endpointhandler.mdx","titleType":"append","MdxNode":{"id":"45715247-1d3a-5984-b3ae-51e724463903","children":[],"parent":"ec58b884-1b56-52b4-a1d8-231601daf71b","internal":{"content":"---\ntitle: Endpoint script\n---\n\nYou can write Maximo Integration Framework (MIF) endpoint handlers using automation scripts. For example, you might want to write\na handler for sending emails, which is something that is not there in Maximo. To write a handler for sending emails:\n\n\n1. Use the **Add/Modify** handlers action from the endpoint application to add a new handler. You can  name it \"SCRIPT\" and you can set the class name to be com.ibm.tivoli.maximo.script.ScriptRouterHandler. **Note:** This handler is there from Maximo 7.6.1.2 onwards.\n2. Create a new endpoint for that handler Endpoints app.\n3. Set the handler to be SCRIPT.\n4. Set the \"script\" property to the name of the script that you are going to write. For example, you can name the script \"emailme\".\nYou have now created a script named \"emailme\".\n\n\nThe following table shows the implicit variables specific to these endpoint scripts.\n\n\n|Variable|Purpose|\n|:--------------|:---------------------------------------------------------|\n|requestData|Byte[] data for endpoints.|\n|requestDataS|String data for endpoints. If the byte[] cannot be converted to String - this variable is not set.|\n|responseData|This is an OUT implicit variable. The endpoint script code can set it to store the response from the actual endpoint call. This can be set as a String or a byte[].|\n\n\nAll endpoint `metaData` content is set as variables to the script. This means that in case of Publish Channel endpoints, all JMS/Kafka messages headers are set as variables in the script. Variables like `destination` would be available and set to the external system name for that endpoint script. \n\n\nIt is possible to write the following simple code:\n\n```python\nfrom psdi.server import MXServer\nfrom java.lang import String\n\nMXServer.getMXServer().sendEMail( to,from,subject, String(requestData))\n```\n\nYou can define the from and to as literal variables in the script and then set the\nemail addresses there. You can also define another literal variable called \"subject\" to define a\nstatic subject for the email like \"Email from Maximo\". You can make it more dynamic and fancy\nby getting the `to` email from the data, and set other properties.\n\nThe following example shows how to write a custom web service handler that uses WS-Security UserNameToken, which is not supported in MIF WebService Handler. The following script code leverages the JAXWSClient utility to set WS-Security UserNameToken.\n\n```python\nfrom org.jdom import Element\nfrom org.jdom import Namespace\nfrom psdi.iface.webservices import JAXWSClient\nfrom java.util import HashMap\nfrom java.util import ArrayList\nfrom psdi.iface.util import XMLUtils\nfrom javax.xml.namespace import QName\n\nns = \"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\"\n\nsecQName = QName(ns, \"Security\")\nsec = Element(\"Security\",ns)\n\nwsu = Namespace.getNamespace(\"wsu\",\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\")\nsec.addNamespaceDeclaration(wsu)\nunt = Element(\"UsernameToken\", ns)\nsec.addContent(unt)\nunt.setAttribute(\"Id\", \"UsernameToken-61F4CA1CC16641CEA914170628622665\", wsu)\nun = Element(\"Username\", ns)\nun.setText(\"testusermaximo\")\nunt.addContent(un)\n\t\t\npwd = Element(\"Password\", ns)\nunt.addContent(pwd)\npwd.setAttribute(\"Type\",\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText\")\npwd.setText(\"WinterTime15\")\ncl = JAXWSClient()\n\nlist = ArrayList()\nlist.add(XMLUtils.convertElementToString(sec))\nsoapHeaders = HashMap()\nsoapHeaders.put(secQName, list)\n\nlist = ArrayList()\nlist.add(\"d2lsc29uOndpbHNvbg==\")\nhttpHeaders = HashMap()\nhttpHeaders.put(\"maxauth\", list)\n\n\nresponseData = cl.invoke(requestData, \"test\", \"http://host:port/meaweb/services/SYSTEM\", \"urn:action\", \"SOAP11\", None, None, None, httpHeaders, 10000, 10000, soapHeaders, None)\n```\n\nThe code leverages the jdom library that ships with Maximo Manage to create the security header. \nThe script code hard codes the username and password, but they can be set as script literal variables. \nThis is also applicable with the URLs to invoke, in this case, /meaweb/services/SYSTEM, and other input parameters to the cl.invoke(..) call.\nThe code shows how to add the soap headers as well as HTTP headers as an example.\n\n\n## HTTP Handler Exit\n\n\nHTTP handler provides an exit that can be leveraged to intercept and modify the request and response. \nThe HTTPEXIT property of the handler endpoint can be set to a value like script:{script name} to register a scripted exit for the HTTP endpoint.\nA script will support the following set of callback functions.\n\n\n|Script Http Handler Exit methods|Purpose|\n|:-----------|:---------------------------------------------------------|\n|urlProps(req)|Used for adding query params to a configured URL. The req object is implemented by `psdi.iface.router. ScriptHTTPReq`. Use the `req.addUrlProp(propname,propvalue)` API to set the URL query parameters.|\n|getUrl(req)|Used for setting the URL for HTTP call. Use the `req.setUrl(url)` API to set the new URL.|\n|headerProps(req)|Used for setting request headers for the HTTP call. Use the `req.addHeader(propname,propvalue)` API to set the HTTP request headers.|\n|processResponse(resp)|Used for processing HTTP response. The resp object is implemented by `psdi.iface.router.ScriptHTTPResp`. Use the 'resp.setError(java.util.Exception)' API to mark the response for Error and the Error message. You can use the resp.getData() to get the response data and analyze that in the script.|\n\n\n### ScriptHTTPReq details\n\n|ScriptHTTPReq methods|Purpose|\n|:-----------|:---------------------------------------------------------|\n|getData()|Used to get byte[] data that has been passed to the endpoint.|\n|getSData()|Used to get String data that has been passed to the endpoint.|\n|getMetaData()|Used for getting the metadata `java.util.Map` object that was passed in to the endpoint. This contains some of the jms/kafka message headers.|\n|getEndPointName())|Used for getting the endpoint name (string).|\n|setURL(String url)|Sets the URL to be called. This overrides the URL, if that is set in the endpoint configuration|\n|getURL()|Returns the URL (string) to be invoked.|\n|addHeader(String name, String value)|Adds an HTTP header/value pair to the request.|\n|getHeaderProps()|Gets the HTTP header/value `java.util.Map` for the request.|\n|addUrlProp(String name, String value)|Adds an HTTP URL query param/value pair to the request.|\n|getUrlProps()|Gets the HTTP query param/value `java.util.Map` for the request.|\n|addFormProp(String name, String value)|Adds an HTTP form param/value pair to the request.|\n|getFormProps()|Gets the HTTP form param/value `java.util.Map` for the request.|\n\n\n### ScriptHTTPResp details\n\n|ScriptHTTPResp methods|Purpose|\n|:-----------|:---------------------------------------------------------|\n|getData()|Gets byte[] data response.|\n|getMetaData()|Gets the metadata `java.util.Map` object that was passed in to the endpoint. This contains some of the jms/kafka message headers.|\n|getEndPointName)|Gets the endpoint name (string).|\n|geResponseMsg()|Returns the response status message from the HTTP call|\n|getResponseCode()|Returns the HTTP response code.|\n|setError(Exception e)|Sets the error ( `java.lang.Exception instance`) by analyzing the HTTP response.|\n\n\n\n\n\n## Web service handler exit\n\nSimilar to HTTP Handler, Web Service handler also provides an exit that can be leveraged to intercept and modify the SOAP request and response. \nThe WSEXIT property of the handler endpoint can be set to a value like script:{script name} to register a scripted exit for the web service endpoint.\nThe following callback functions are supported by a script.\n\n\n|Script web service handler exit methods|Purpose|\n|:-----------|:---------------------------------------------------------|\n|responseOk(resp)|Analyzes a good response from the external web service. The resp object is implemented by the `psdi.iface.router.ScriptSOAPResp` object. This can be leveraged to either do some processing with the response or set an error.|\n|responseError(resp)|Analyzes and takes action, if needed, for an error response from the external web service. The resp object is implemented by the `psdi.iface.router.ScriptSOAPResp` object.|\n|setupHeaders(req)|Uses request soap headers for the soap call. The req object is implemented by the `psdi.iface.router.ScriptSOAPReq` object.|\n\n\n### ScriptSOAPReq details\n\n|ScriptSOAPReq methods|Purpose|\n|:-----------|:---------------------------------------------------------|\n|getData()|Gets byte[] data that has been passed to the endpoint.|\n|getMetaData()|Gets the metadata `java.util.Map` object that was passed in to the endpoint. This contains some of the jms/kafka message headers.|\n|getEndPointName())|Gets the endpoint name (string).|\n|setURL(String url)|Sets the URL to be called. This override the URL if that is set in the endpoint configuration|\n|getURL()|Returns the URL (string) to be invoked.|\n|addHeader(String ns, String name, String value)|Adds soap header/value pair to the request. `ns` specifies the namespace for the header element. The following example shows the usage.|\n|getHeaderProps()|Gets the soap header/value `Map<QName,List<String>>` for the request.|\n\n\n### ScriptSOAPResp details\n\n\n|ScriptSOAPResp methods|Purpose|\n|:-----------|:---------------------------------------------------------|\n|getData()|UGets byte[] data response.|\n|getMetaData()|Gets the metadata `java.util.Map` object that was passed in to the endpoint. This contains some of the jms/kafka message headers.|\n|getEndPointName)|Gets the endpoint name (string).|\n|setError(Exception e)|Sets the error ( `java.lang.Exception instance`) by analyzing the soap response.|\n\n\nThe following sample code shows how a WS Security header can be set using the setupHeaders.\n\n\n```python\nfrom org.jdom import Element\nfrom org.jdom import Namespace\n\nfrom java.util import HashMap\nfrom java.util import ArrayList\nfrom psdi.iface.util import XMLUtils\nfrom javax.xml.namespace import QName\n\ndef setupHeaders(req):\n\n\tns = \"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\"\n\n\tsecQName = QName(ns, \"Security\")\n\tsec = Element(\"Security\",ns)\n\n\twsu = Namespace.getNamespace(\"wsu\",\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\")\n\tsec.addNamespaceDeclaration(wsu)\n\tunt = Element(\"UsernameToken\", ns)\n\tsec.addContent(unt)\n\tunt.setAttribute(\"Id\", \"UsernameToken-61F4CA1CC16641CEA914170628622665\", wsu)\n\tun = Element(\"Username\", ns)\n\tun.setText(\"testusermaximo\")\n\tunt.addContent(un)\n\t\t\t\n\tpwd = Element(\"Password\", ns)\n\tunt.addContent(pwd)\n\tpwd.setAttribute(\"Type\",\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText\")\n\tpwd.setText(\"WinterTime15\")\n\n\theaderVal = XMLUtils.convertElementToString(sec)\n\treq.addHeader(ns, \"Security\", headerVal)\n```\n\n## JMS Handler Exit\n\nCustomers often need to write an outbound integration message to an external queue. They can leverage the JMSHandler for this purpose.\nCustomers can create an endpoint for this. The endpoint allows an exit to customize the JMS message properties as well as process the response, whether it is success or error.\nLike other endpoint exits, this is an interface type script. \n\n|Script JMS handler exit methods|Purpose|\n|:-----------|:---------------------------------------------------------|\n|msgProps(req)|Allows developers to set JMS message properties. The `req` object is of type `psdi.iface.router.ScriptJMSReq`|\n|responseError(resp)|Allows developers to process error response from the external JMS provider. The `resp` object is implemented by the `psdi.iface.router.ScriptJMSResp` object.|\n|responseOk(resp)|Allows developers to process success response from JMS provider. The `resp` object is implemented by the `psdi.iface.router.ScriptJMSResp` object.|\n\n\n### ScriptJMSReq details\n\n|ScriptJMSReq methods|Purpose|\n|:-----------|:---------------------------------------------------------|\n|getData()|Gets byte[] data that has been passed to the endpoint.|\n|getMetaData()|Gets the metadata `java.util.Map` object that was passed in to the endpoint. This contains some of the jms/kafka message headers.|\n|getEndPointName())|Gets the endpoint name (string).|\n|setURL(String url)|Sets the URL to be called. This override the URL if that is set in the endpoint configuration|\n|getURL()|Returns the URL (string) to be invoked.|\n|addProperty(String prop, String value)|Adds jms message property/value pair to the request.|\n|getMessageProperties()|Gets the jms message property/value `Map<String,String>` for the request.|\n\n\n### ScriptJMSResp details\n\n\n|ScriptJMSResp methods|Purpose|\n|:-----------|:---------------------------------------------------------|\n|getData()|Gets byte[] data that has been passed to the endpoint.|\n|getMetaData()|Gets the metadata `java.util.Map` object that was passed in to the endpoint. This contains some of the jms/kafka message headers.|\n|getEndPointName())|Gets the endpoint name (string).|\n|getError()|Gets the error ( `java.lang.Exception instance`) form jms response.|\n\nThe following sample script demonstrates this.\n\n```python\ndef msgProps(ctx):\n  ctx.addProperty(\"maxendpoint\",ctx.getEndPointName())\n```\n\n","type":"Mdx","contentDigest":"857e16f0dc7c03efc173e563b41464e2","owner":"gatsby-plugin-mdx","counter":171},"frontmatter":{"title":"Endpoint script"},"exports":{},"rawBody":"---\ntitle: Endpoint script\n---\n\nYou can write Maximo Integration Framework (MIF) endpoint handlers using automation scripts. For example, you might want to write\na handler for sending emails, which is something that is not there in Maximo. To write a handler for sending emails:\n\n\n1. Use the **Add/Modify** handlers action from the endpoint application to add a new handler. You can  name it \"SCRIPT\" and you can set the class name to be com.ibm.tivoli.maximo.script.ScriptRouterHandler. **Note:** This handler is there from Maximo 7.6.1.2 onwards.\n2. Create a new endpoint for that handler Endpoints app.\n3. Set the handler to be SCRIPT.\n4. Set the \"script\" property to the name of the script that you are going to write. For example, you can name the script \"emailme\".\nYou have now created a script named \"emailme\".\n\n\nThe following table shows the implicit variables specific to these endpoint scripts.\n\n\n|Variable|Purpose|\n|:--------------|:---------------------------------------------------------|\n|requestData|Byte[] data for endpoints.|\n|requestDataS|String data for endpoints. If the byte[] cannot be converted to String - this variable is not set.|\n|responseData|This is an OUT implicit variable. The endpoint script code can set it to store the response from the actual endpoint call. This can be set as a String or a byte[].|\n\n\nAll endpoint `metaData` content is set as variables to the script. This means that in case of Publish Channel endpoints, all JMS/Kafka messages headers are set as variables in the script. Variables like `destination` would be available and set to the external system name for that endpoint script. \n\n\nIt is possible to write the following simple code:\n\n```python\nfrom psdi.server import MXServer\nfrom java.lang import String\n\nMXServer.getMXServer().sendEMail( to,from,subject, String(requestData))\n```\n\nYou can define the from and to as literal variables in the script and then set the\nemail addresses there. You can also define another literal variable called \"subject\" to define a\nstatic subject for the email like \"Email from Maximo\". You can make it more dynamic and fancy\nby getting the `to` email from the data, and set other properties.\n\nThe following example shows how to write a custom web service handler that uses WS-Security UserNameToken, which is not supported in MIF WebService Handler. The following script code leverages the JAXWSClient utility to set WS-Security UserNameToken.\n\n```python\nfrom org.jdom import Element\nfrom org.jdom import Namespace\nfrom psdi.iface.webservices import JAXWSClient\nfrom java.util import HashMap\nfrom java.util import ArrayList\nfrom psdi.iface.util import XMLUtils\nfrom javax.xml.namespace import QName\n\nns = \"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\"\n\nsecQName = QName(ns, \"Security\")\nsec = Element(\"Security\",ns)\n\nwsu = Namespace.getNamespace(\"wsu\",\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\")\nsec.addNamespaceDeclaration(wsu)\nunt = Element(\"UsernameToken\", ns)\nsec.addContent(unt)\nunt.setAttribute(\"Id\", \"UsernameToken-61F4CA1CC16641CEA914170628622665\", wsu)\nun = Element(\"Username\", ns)\nun.setText(\"testusermaximo\")\nunt.addContent(un)\n\t\t\npwd = Element(\"Password\", ns)\nunt.addContent(pwd)\npwd.setAttribute(\"Type\",\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText\")\npwd.setText(\"WinterTime15\")\ncl = JAXWSClient()\n\nlist = ArrayList()\nlist.add(XMLUtils.convertElementToString(sec))\nsoapHeaders = HashMap()\nsoapHeaders.put(secQName, list)\n\nlist = ArrayList()\nlist.add(\"d2lsc29uOndpbHNvbg==\")\nhttpHeaders = HashMap()\nhttpHeaders.put(\"maxauth\", list)\n\n\nresponseData = cl.invoke(requestData, \"test\", \"http://host:port/meaweb/services/SYSTEM\", \"urn:action\", \"SOAP11\", None, None, None, httpHeaders, 10000, 10000, soapHeaders, None)\n```\n\nThe code leverages the jdom library that ships with Maximo Manage to create the security header. \nThe script code hard codes the username and password, but they can be set as script literal variables. \nThis is also applicable with the URLs to invoke, in this case, /meaweb/services/SYSTEM, and other input parameters to the cl.invoke(..) call.\nThe code shows how to add the soap headers as well as HTTP headers as an example.\n\n\n## HTTP Handler Exit\n\n\nHTTP handler provides an exit that can be leveraged to intercept and modify the request and response. \nThe HTTPEXIT property of the handler endpoint can be set to a value like script:{script name} to register a scripted exit for the HTTP endpoint.\nA script will support the following set of callback functions.\n\n\n|Script Http Handler Exit methods|Purpose|\n|:-----------|:---------------------------------------------------------|\n|urlProps(req)|Used for adding query params to a configured URL. The req object is implemented by `psdi.iface.router. ScriptHTTPReq`. Use the `req.addUrlProp(propname,propvalue)` API to set the URL query parameters.|\n|getUrl(req)|Used for setting the URL for HTTP call. Use the `req.setUrl(url)` API to set the new URL.|\n|headerProps(req)|Used for setting request headers for the HTTP call. Use the `req.addHeader(propname,propvalue)` API to set the HTTP request headers.|\n|processResponse(resp)|Used for processing HTTP response. The resp object is implemented by `psdi.iface.router.ScriptHTTPResp`. Use the 'resp.setError(java.util.Exception)' API to mark the response for Error and the Error message. You can use the resp.getData() to get the response data and analyze that in the script.|\n\n\n### ScriptHTTPReq details\n\n|ScriptHTTPReq methods|Purpose|\n|:-----------|:---------------------------------------------------------|\n|getData()|Used to get byte[] data that has been passed to the endpoint.|\n|getSData()|Used to get String data that has been passed to the endpoint.|\n|getMetaData()|Used for getting the metadata `java.util.Map` object that was passed in to the endpoint. This contains some of the jms/kafka message headers.|\n|getEndPointName())|Used for getting the endpoint name (string).|\n|setURL(String url)|Sets the URL to be called. This overrides the URL, if that is set in the endpoint configuration|\n|getURL()|Returns the URL (string) to be invoked.|\n|addHeader(String name, String value)|Adds an HTTP header/value pair to the request.|\n|getHeaderProps()|Gets the HTTP header/value `java.util.Map` for the request.|\n|addUrlProp(String name, String value)|Adds an HTTP URL query param/value pair to the request.|\n|getUrlProps()|Gets the HTTP query param/value `java.util.Map` for the request.|\n|addFormProp(String name, String value)|Adds an HTTP form param/value pair to the request.|\n|getFormProps()|Gets the HTTP form param/value `java.util.Map` for the request.|\n\n\n### ScriptHTTPResp details\n\n|ScriptHTTPResp methods|Purpose|\n|:-----------|:---------------------------------------------------------|\n|getData()|Gets byte[] data response.|\n|getMetaData()|Gets the metadata `java.util.Map` object that was passed in to the endpoint. This contains some of the jms/kafka message headers.|\n|getEndPointName)|Gets the endpoint name (string).|\n|geResponseMsg()|Returns the response status message from the HTTP call|\n|getResponseCode()|Returns the HTTP response code.|\n|setError(Exception e)|Sets the error ( `java.lang.Exception instance`) by analyzing the HTTP response.|\n\n\n\n\n\n## Web service handler exit\n\nSimilar to HTTP Handler, Web Service handler also provides an exit that can be leveraged to intercept and modify the SOAP request and response. \nThe WSEXIT property of the handler endpoint can be set to a value like script:{script name} to register a scripted exit for the web service endpoint.\nThe following callback functions are supported by a script.\n\n\n|Script web service handler exit methods|Purpose|\n|:-----------|:---------------------------------------------------------|\n|responseOk(resp)|Analyzes a good response from the external web service. The resp object is implemented by the `psdi.iface.router.ScriptSOAPResp` object. This can be leveraged to either do some processing with the response or set an error.|\n|responseError(resp)|Analyzes and takes action, if needed, for an error response from the external web service. The resp object is implemented by the `psdi.iface.router.ScriptSOAPResp` object.|\n|setupHeaders(req)|Uses request soap headers for the soap call. The req object is implemented by the `psdi.iface.router.ScriptSOAPReq` object.|\n\n\n### ScriptSOAPReq details\n\n|ScriptSOAPReq methods|Purpose|\n|:-----------|:---------------------------------------------------------|\n|getData()|Gets byte[] data that has been passed to the endpoint.|\n|getMetaData()|Gets the metadata `java.util.Map` object that was passed in to the endpoint. This contains some of the jms/kafka message headers.|\n|getEndPointName())|Gets the endpoint name (string).|\n|setURL(String url)|Sets the URL to be called. This override the URL if that is set in the endpoint configuration|\n|getURL()|Returns the URL (string) to be invoked.|\n|addHeader(String ns, String name, String value)|Adds soap header/value pair to the request. `ns` specifies the namespace for the header element. The following example shows the usage.|\n|getHeaderProps()|Gets the soap header/value `Map<QName,List<String>>` for the request.|\n\n\n### ScriptSOAPResp details\n\n\n|ScriptSOAPResp methods|Purpose|\n|:-----------|:---------------------------------------------------------|\n|getData()|UGets byte[] data response.|\n|getMetaData()|Gets the metadata `java.util.Map` object that was passed in to the endpoint. This contains some of the jms/kafka message headers.|\n|getEndPointName)|Gets the endpoint name (string).|\n|setError(Exception e)|Sets the error ( `java.lang.Exception instance`) by analyzing the soap response.|\n\n\nThe following sample code shows how a WS Security header can be set using the setupHeaders.\n\n\n```python\nfrom org.jdom import Element\nfrom org.jdom import Namespace\n\nfrom java.util import HashMap\nfrom java.util import ArrayList\nfrom psdi.iface.util import XMLUtils\nfrom javax.xml.namespace import QName\n\ndef setupHeaders(req):\n\n\tns = \"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\"\n\n\tsecQName = QName(ns, \"Security\")\n\tsec = Element(\"Security\",ns)\n\n\twsu = Namespace.getNamespace(\"wsu\",\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\")\n\tsec.addNamespaceDeclaration(wsu)\n\tunt = Element(\"UsernameToken\", ns)\n\tsec.addContent(unt)\n\tunt.setAttribute(\"Id\", \"UsernameToken-61F4CA1CC16641CEA914170628622665\", wsu)\n\tun = Element(\"Username\", ns)\n\tun.setText(\"testusermaximo\")\n\tunt.addContent(un)\n\t\t\t\n\tpwd = Element(\"Password\", ns)\n\tunt.addContent(pwd)\n\tpwd.setAttribute(\"Type\",\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText\")\n\tpwd.setText(\"WinterTime15\")\n\n\theaderVal = XMLUtils.convertElementToString(sec)\n\treq.addHeader(ns, \"Security\", headerVal)\n```\n\n## JMS Handler Exit\n\nCustomers often need to write an outbound integration message to an external queue. They can leverage the JMSHandler for this purpose.\nCustomers can create an endpoint for this. The endpoint allows an exit to customize the JMS message properties as well as process the response, whether it is success or error.\nLike other endpoint exits, this is an interface type script. \n\n|Script JMS handler exit methods|Purpose|\n|:-----------|:---------------------------------------------------------|\n|msgProps(req)|Allows developers to set JMS message properties. The `req` object is of type `psdi.iface.router.ScriptJMSReq`|\n|responseError(resp)|Allows developers to process error response from the external JMS provider. The `resp` object is implemented by the `psdi.iface.router.ScriptJMSResp` object.|\n|responseOk(resp)|Allows developers to process success response from JMS provider. The `resp` object is implemented by the `psdi.iface.router.ScriptJMSResp` object.|\n\n\n### ScriptJMSReq details\n\n|ScriptJMSReq methods|Purpose|\n|:-----------|:---------------------------------------------------------|\n|getData()|Gets byte[] data that has been passed to the endpoint.|\n|getMetaData()|Gets the metadata `java.util.Map` object that was passed in to the endpoint. This contains some of the jms/kafka message headers.|\n|getEndPointName())|Gets the endpoint name (string).|\n|setURL(String url)|Sets the URL to be called. This override the URL if that is set in the endpoint configuration|\n|getURL()|Returns the URL (string) to be invoked.|\n|addProperty(String prop, String value)|Adds jms message property/value pair to the request.|\n|getMessageProperties()|Gets the jms message property/value `Map<String,String>` for the request.|\n\n\n### ScriptJMSResp details\n\n\n|ScriptJMSResp methods|Purpose|\n|:-----------|:---------------------------------------------------------|\n|getData()|Gets byte[] data that has been passed to the endpoint.|\n|getMetaData()|Gets the metadata `java.util.Map` object that was passed in to the endpoint. This contains some of the jms/kafka message headers.|\n|getEndPointName())|Gets the endpoint name (string).|\n|getError()|Gets the error ( `java.lang.Exception instance`) form jms response.|\n\nThe following sample script demonstrates this.\n\n```python\ndef msgProps(ctx):\n  ctx.addProperty(\"maxendpoint\",ctx.getEndPointName())\n```\n\n","fileAbsolutePath":"/home/travis/build/maximo-app-framework/maximo-autoscript-documentation/src/pages/integration/endpointhandler.mdx"}}},
    "staticQueryHashes": ["1364590287","137577622","2102389209","2456312558","2746626797","3018647132","3037994772","768070550"]}