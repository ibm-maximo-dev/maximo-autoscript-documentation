{
    "componentChunkName": "component---src-pages-integration-enterpriseevents-mdx",
    "path": "/integration/enterpriseevents/",
    "result": {"pageContext":{"frontmatter":{"title":"Enterprise Service Script"},"relativePagePath":"/integration/enterpriseevents.mdx","titleType":"append","MdxNode":{"id":"5b84f366-35d7-5767-8bd2-02d7bb48c37b","children":[],"parent":"a69b0107-6929-52b7-af68-171fc733a570","internal":{"content":"---\ntitle: Enterprise Service Script\n---\n\n\nEnterprise Services provide the inbound integration backbone of Maximo. They represent the internal implementation for all kinds of services that MIF offers - \nXML/HTTP, SOAP, Flat Files, Interface tables to name a few. Enterprise services may or maynot be async ie they can optionally leverage the queues.  \nEnterprise services are also used for Data import from UI as well as cron jobs (File, Interface Tables).\nIf the service is async, the Enterprise service execution starts after the messages get picked up from those queues and\n get pushed downstream. Like its outbound equivalent (Publish Channel), Enterprise Services are used to transform data from external format to Maximo format - json or xml.  \nEnterprise Services support the below script points:\n\n\n|Script Point|Purpose|\n|:--------------|:---------------------------------------------------------|\n|External Exits|Used for data transformation of inbound messages from External format (`erData`) to internal Maximo format `irData`|\n|User Exit (Before External Exit)|Used for data modification before it reches the External Exit (`erData`).|\n|User Exit (After External Exit)|Used data transaformation from the output of the External Exit to target maximo format.|\n\n\nThe table below lists the variables available \n\n\n|Variable|Purpose|\n|:--------------|:---------------------------------------------------------|\n|erData|an instance of psdi.iface.mic.StructureData used to hold the external document. Available for all 3 exits.|\n|irData|an instance of psdi.iface.mic.StructureData used to hold the internal (maximo format) document. This is set to null (as input) for External Exit and Before User Exit. External exits are expected to set the `irData` by transforming the `erData`.|\n|ifaceType|The interface type name.|\n|ifaceName|The channel name.|\n|osName|The Object Structure name.|\n|messageType|The message type which can have values like Sync/Create/Update/Delete.|\n|extSystem|The external system name.|\n|userInfo|The UserInfo object representing the authentocated user that invoked this service.|\n|conn|The jdbc Connection object.|\n\n\nBelow is an example of a After user exit script that sets the wopriority to an inbound WO transaction.\n\n```python\nif irData.getCurrentData(\"vendor\")==\"A0001\" and irData.isCurrentDataNull(\"wopriority\")==True:\n  irData.setCurrentDataAsInt(\"wopriority\",1)\n```  \n\nNote that the \"After User Exit\" for Enterprise service would work with the `irData` (internal maximo format data) \nas the inbound External exit would have mapped the external format to internal format.\nAnother example of a before user exit is shown below. Here the script decides to skip the transaction when a certainm condition is met.\n\n```\nfrom org.jdom import Namespace\n\ndoc = erData.getData()\nextXMLRoot = doc.getRootElement()\norgname = extXMLRoot.getChildText(\"orgname\", Namespace.getNamespace(\"http://some_ns.org\"))\nif orgname==\"somevalue\":\n  service.raiseSkipTransaction()\n```\n\nAs apparent, the Before User Exit has access to only the `erData` variable that contains the external document. \nIn this case the external document is XML and the api to access that as a JDOM document is `erData.getData()`. \nNote that had this been an json document, we would need to use a differe api to get the json data. The below script is an example of that:\n\n\n```\nfrom com.ibm.tivoli.maximo.oslc import OslcUtils\njsonData = OslcUtils.byteToJson(erData.getOriginalByteData())\n\norgname = jsonData.get(\"orgname\")\nif orgname==\"somevalue\":\n  service.raiseSkipTransaction()\n```\n\nAn example for External Exit Script that cretes a Maximo companies by mapping external data to to MXVENDOR Object Structure is shown below:\n\n```python\nfrom psdi.iface.mic import EnterpriseServiceCache\nfrom psdi.server import MXServer\nfrom org.jdom import Namespace\n\ndoc = erData.getData()\nextXMLRoot = doc.getRootElement()\nvendor = extXMLRoot.getChildText(\"vendor\", Namespace.getNamespace(\"http://some_ns.org\"))\norganization = extXMLRoot.getChildText(\"organization\", Namespace.getNamespace(\"http://some_ns.org\"))\nsrv = EnterpriseServiceCache.getInstance().getEnterpriseServiceInfo(\"MXVENDORInterface\")\nchangeBy = extXMLRoot.getChildText(\"user\", Namespace.getNamespace(\"http://some_ns.org\"))\nirData = StructureData(srv.getMessageType(), srv.getMosName(), userInfo.getLangCode(), 1, false, false)\nirData.setCurrentData(\"COMPANY\", vendor)\nirData.setCurrentData(\"ORGID\", organization)\nirData.setCurrentData(\"CHANGEBY\", changeBy)\nirData.setCurrentData(\"CHANGEDATE\", MXServer.getMXServer().getDate())\n```\n\n  \n\n\n\n","type":"Mdx","contentDigest":"9df0aa6acaeebbd24e1bdccd1ae06ae8","owner":"gatsby-plugin-mdx","counter":155},"frontmatter":{"title":"Enterprise Service Script"},"exports":{},"rawBody":"---\ntitle: Enterprise Service Script\n---\n\n\nEnterprise Services provide the inbound integration backbone of Maximo. They represent the internal implementation for all kinds of services that MIF offers - \nXML/HTTP, SOAP, Flat Files, Interface tables to name a few. Enterprise services may or maynot be async ie they can optionally leverage the queues.  \nEnterprise services are also used for Data import from UI as well as cron jobs (File, Interface Tables).\nIf the service is async, the Enterprise service execution starts after the messages get picked up from those queues and\n get pushed downstream. Like its outbound equivalent (Publish Channel), Enterprise Services are used to transform data from external format to Maximo format - json or xml.  \nEnterprise Services support the below script points:\n\n\n|Script Point|Purpose|\n|:--------------|:---------------------------------------------------------|\n|External Exits|Used for data transformation of inbound messages from External format (`erData`) to internal Maximo format `irData`|\n|User Exit (Before External Exit)|Used for data modification before it reches the External Exit (`erData`).|\n|User Exit (After External Exit)|Used data transaformation from the output of the External Exit to target maximo format.|\n\n\nThe table below lists the variables available \n\n\n|Variable|Purpose|\n|:--------------|:---------------------------------------------------------|\n|erData|an instance of psdi.iface.mic.StructureData used to hold the external document. Available for all 3 exits.|\n|irData|an instance of psdi.iface.mic.StructureData used to hold the internal (maximo format) document. This is set to null (as input) for External Exit and Before User Exit. External exits are expected to set the `irData` by transforming the `erData`.|\n|ifaceType|The interface type name.|\n|ifaceName|The channel name.|\n|osName|The Object Structure name.|\n|messageType|The message type which can have values like Sync/Create/Update/Delete.|\n|extSystem|The external system name.|\n|userInfo|The UserInfo object representing the authentocated user that invoked this service.|\n|conn|The jdbc Connection object.|\n\n\nBelow is an example of a After user exit script that sets the wopriority to an inbound WO transaction.\n\n```python\nif irData.getCurrentData(\"vendor\")==\"A0001\" and irData.isCurrentDataNull(\"wopriority\")==True:\n  irData.setCurrentDataAsInt(\"wopriority\",1)\n```  \n\nNote that the \"After User Exit\" for Enterprise service would work with the `irData` (internal maximo format data) \nas the inbound External exit would have mapped the external format to internal format.\nAnother example of a before user exit is shown below. Here the script decides to skip the transaction when a certainm condition is met.\n\n```\nfrom org.jdom import Namespace\n\ndoc = erData.getData()\nextXMLRoot = doc.getRootElement()\norgname = extXMLRoot.getChildText(\"orgname\", Namespace.getNamespace(\"http://some_ns.org\"))\nif orgname==\"somevalue\":\n  service.raiseSkipTransaction()\n```\n\nAs apparent, the Before User Exit has access to only the `erData` variable that contains the external document. \nIn this case the external document is XML and the api to access that as a JDOM document is `erData.getData()`. \nNote that had this been an json document, we would need to use a differe api to get the json data. The below script is an example of that:\n\n\n```\nfrom com.ibm.tivoli.maximo.oslc import OslcUtils\njsonData = OslcUtils.byteToJson(erData.getOriginalByteData())\n\norgname = jsonData.get(\"orgname\")\nif orgname==\"somevalue\":\n  service.raiseSkipTransaction()\n```\n\nAn example for External Exit Script that cretes a Maximo companies by mapping external data to to MXVENDOR Object Structure is shown below:\n\n```python\nfrom psdi.iface.mic import EnterpriseServiceCache\nfrom psdi.server import MXServer\nfrom org.jdom import Namespace\n\ndoc = erData.getData()\nextXMLRoot = doc.getRootElement()\nvendor = extXMLRoot.getChildText(\"vendor\", Namespace.getNamespace(\"http://some_ns.org\"))\norganization = extXMLRoot.getChildText(\"organization\", Namespace.getNamespace(\"http://some_ns.org\"))\nsrv = EnterpriseServiceCache.getInstance().getEnterpriseServiceInfo(\"MXVENDORInterface\")\nchangeBy = extXMLRoot.getChildText(\"user\", Namespace.getNamespace(\"http://some_ns.org\"))\nirData = StructureData(srv.getMessageType(), srv.getMosName(), userInfo.getLangCode(), 1, false, false)\nirData.setCurrentData(\"COMPANY\", vendor)\nirData.setCurrentData(\"ORGID\", organization)\nirData.setCurrentData(\"CHANGEBY\", changeBy)\nirData.setCurrentData(\"CHANGEDATE\", MXServer.getMXServer().getDate())\n```\n\n  \n\n\n\n","fileAbsolutePath":"/home/travis/build/maximo-app-framework/maximo-autoscript-documentation/src/pages/integration/enterpriseevents.mdx"}}},
    "staticQueryHashes": ["1364590287","137577622","2102389209","2456312558","2746626797","3018647132","3037994772","768070550"]}