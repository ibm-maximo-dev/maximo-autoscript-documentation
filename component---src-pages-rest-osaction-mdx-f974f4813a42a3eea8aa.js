"use strict";(self.webpackChunkmas_playbook=self.webpackChunkmas_playbook||[]).push([[5542],{7955:function(e,t,a){a.r(t),a.d(t,{_frontmatter:function(){return o},default:function(){return c}});var n=a(3366),r=(a(7294),a(4983)),A=a(4295),i=["components"],o={},l={_frontmatter:o},s=A.Z;function c(e){var t=e.components,a=(0,n.Z)(e,i);return(0,r.kt)(s,Object.assign({},l,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"When you need to call a custom action on your Mbo (or MboSet) from the REST API you can define an Object Structure Action. Currently this is specific to each object structure but will be enhanced in Manage 8.3/TPAE 7.6.1.3 so that you can define these as System Actions to be used across all Object Structures. "),(0,r.kt)("h2",null,"Implicit variables"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"left"},"Variable name"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"request"),(0,r.kt)("td",{parentName:"tr",align:"left"},"OslcRequest representation of the request being made. This exposes methods such as request.getQueryParam(“parameter”) & request.getHeader(“header”) to retrieve values provided as a query parameter or header respectively. You can also access the UserInfo by calling request.getUserInfo().")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"requestBody"),(0,r.kt)("td",{parentName:"tr",align:"left"},"The body of the request if one was provided.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"httpMethod"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Whether this was a GET, POST, PUT, etc. Can also be retrieved by calling request.getHttpMethod().")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"mbo"),(0,r.kt)("td",{parentName:"tr",align:"left"},"This is the Mbo for the main object of the object structure.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"left"},"mboset"),(0,r.kt)("td",{parentName:"tr",align:"left"},"This is the MboSet for the main object of your object structure.")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Step 1")," In the Automation Script application, create a Script for Integration and choose the Object Structure. Select the radio button for Action Processing and give it a unique name. Provide the script source.\n",(0,r.kt)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1107px"}},"\n      ",(0,r.kt)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"70.4861111111111%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAd5WQD//xAAWEAEBAQAAAAAAAAAAAAAAAAAQEQD/2gAIAQEAAQUCbqf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAZEAEBAQEBAQAAAAAAAAAAAAABABFRQWH/2gAIAQEAAT8hAsOSfI12QHtt/9oADAMBAAIAAwAAABBjz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABoQAQEBAAMBAAAAAAAAAAAAAAEAESExQZH/2gAIAQEAAT8Qw+MUPeBCN34LULAJ23//2Q==')",backgroundSize:"cover",display:"block"}}),"\n  ",(0,r.kt)("img",{parentName:"span",className:"gatsby-resp-image-image",alt:"Action Script Creation",title:"Action Script Creation",src:"/static/3ef82752562b69f0db4467f5d2c591d5/35dca/osactiondefinition.jpg",srcSet:["/static/3ef82752562b69f0db4467f5d2c591d5/69549/osactiondefinition.jpg 288w","/static/3ef82752562b69f0db4467f5d2c591d5/473e3/osactiondefinition.jpg 576w","/static/3ef82752562b69f0db4467f5d2c591d5/35dca/osactiondefinition.jpg 1107w"],sizes:"(max-width: 1107px) 100vw, 1107px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy",decoding:"async"}),"\n    ")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Step 2")," In the Object Structures application, open the Object Structure used in Step 1. From the More Actions open the Action Definition dialog and add a new row."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"}," Step 3")," Provide a name & description. I recommend setting the Action name to match the script action name (SENDCOMM in our example). Set the Implementation Type to Script and select the script created in Step 1. (Optionally) Select the “Collection Action” option if your action is intended to be used on the set (doesn’t require a specific record). (Optionally) Provide an Option Name if you wish to restrict this to a signature option. I’d recommend if it modifies the record to at least tie it to the SAVE permission.  "),(0,r.kt)("h2",null,"Example Script"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'template=request.getQueryParam("template")\nif template:\n    commMbo=mbo.createComm()\n    commMbo.setValue("TEMPLATEID", template)\n    commMbo.sendMessage()\n')),(0,r.kt)("p",null,"Call with a POST request like: "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"https://myurl.com/maximo/api/os/mxapisr/_U1IvMTA2Nw--?lean=1&action=SENDCOMM&template=1014\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"NOTE:")," Be sure to utilize the x-method-override header of PATCH when acting on an existing record. "))}c.isMDXComponent=!0},4295:function(e,t,a){a.d(t,{Z:function(){return k}});var n=a(7294),r=a(8650),A=a.n(r),i=a(5444),o=a(6949),l=a(3293),s=a(5900),c=a.n(s),m=function(e){var t,a=e.title,r=e.theme,A=e.tabs,i=void 0===A?[]:A;return n.createElement("div",{className:c()("PageHeader-module--page-header--NqfPe",(t={},t["PageHeader-module--with-tabs--vbQ-W"]=i.length,t["PageHeader-module--dark-mode--WCeH8"]="dark"===r,t))},n.createElement("div",{className:"bx--grid"},n.createElement("div",{className:"bx--row"},n.createElement("div",{className:"bx--col-lg-12"},n.createElement("h1",{id:"page-title",className:"PageHeader-module--text--Er2EO"},a)))))},d=function(e){var t=e.relativePagePath,a=e.repository,r=(0,i.useStaticQuery)("1364590287").site.siteMetadata.repository,A=a||r,o=A.baseUrl,l=A.subDirectory,s=o+"/edit/"+A.branch+l+"/src/pages"+t;return o?n.createElement("div",{className:"bx--row EditLink-module--row--BEmSX"},n.createElement("div",{className:"bx--col"},n.createElement("a",{className:"EditLink-module--link--IDrl1",href:s},"Edit this page on GitHub"))):null},p=a(4275),u=a(1721),g=function(e){function t(){return e.apply(this,arguments)||this}return(0,u.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.title,a=e.tabs,r=e.slug,o=r.split("/").filter(Boolean).slice(-1)[0],l=a.map((function(e){var t,a=A()(e,{lower:!0,strict:!0}),l=a===o,s=new RegExp(o+"/?(#.*)?$"),m=r.replace(s,a);return n.createElement("li",{key:e,className:c()((t={},t["PageTabs-module--selected-item--aBB0K"]=l,t),"PageTabs-module--list-item--024o6")},n.createElement(i.Link,{className:"PageTabs-module--link--Kz-7R",to:""+m},e))}));return n.createElement("div",{className:"PageTabs-module--tabs-container--Cdfzw"},n.createElement("div",{className:"bx--grid"},n.createElement("div",{className:"bx--row"},n.createElement("div",{className:"bx--col-lg-12 bx--col-no-gutter"},n.createElement("nav",{"aria-label":t},n.createElement("ul",{className:"PageTabs-module--list--xLqxG"},l))))))},t}(n.Component),h=g,b=a(2881),f=a(6958),E=a(36),N=function(e){var t=e.date,a=new Date(t);return t?n.createElement(E.X2,{className:"last-modified-date-module--row--XJoYQ"},n.createElement(E.sg,null,n.createElement("div",{className:"last-modified-date-module--text--ogPQF"},"Page last updated: ",a.toLocaleDateString("en-GB",{day:"2-digit",year:"numeric",month:"long"})))):null},k=function(e){var t=e.pageContext,a=e.children,r=e.location,s=e.Title,c=t.frontmatter,u=void 0===c?{}:c,g=t.relativePagePath,E=t.titleType,k=u.tabs,y=u.title,v=u.theme,Q=u.description,x=u.keywords,B=u.date,S=(0,f.Z)().interiorTheme,P=(0,i.useStaticQuery)("2456312558").site.pathPrefix,j=P?r.pathname.replace(P,""):r.pathname,w=k?j.split("/").filter(Boolean).slice(-1)[0]||A()(k[0],{lower:!0}):"",T=v||S;return n.createElement(l.Z,{tabs:k,homepage:!1,theme:T,pageTitle:y,pageDescription:Q,pageKeywords:x,titleType:E},n.createElement(m,{title:s?n.createElement(s,null):y,label:"label",tabs:k,theme:T}),k&&n.createElement(h,{title:y,slug:j,tabs:k,currentTab:w}),n.createElement(b.Z,{padded:!0},a,n.createElement(d,{relativePagePath:g}),n.createElement(N,{date:B})),n.createElement(p.Z,{pageContext:t,location:r,slug:j,tabs:k,currentTab:w}),n.createElement(o.Z,null))}}}]);
//# sourceMappingURL=component---src-pages-rest-osaction-mdx-f974f4813a42a3eea8aa.js.map