"use strict";(self.webpackChunkmas_playbook=self.webpackChunkmas_playbook||[]).push([[3060],{3221:function(e,t,a){a.r(t),a.d(t,{_frontmatter:function(){return s},default:function(){return p}});var n=a(3366),l=(a(7294),a(4983)),r=a(4295),i=["components"],s={},o={_frontmatter:s},c=r.Z;function p(e){var t=e.components,a=(0,n.Z)(e,i);return(0,l.kt)(c,Object.assign({},o,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h2",null,"Library Script"),(0,l.kt)("p",null,"Library scripts are good for encapsulating some re-usable logic. Frpm Maximo 76 onwards, we can write those reusable blocks into as\nlibrary scripts which are just simple scripts with no launchpoints. We can then leverage the ",(0,l.kt)("inlineCode",{parentName:"p"},"service")," variable to invoke those library scipts from another script.\nNote that Library scripts have undergone some improvements over the last few releases and the section below will discuss both the old way and new way of leveraging those.\nBelow we will use a simple example to showcase the change in usage"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"r=a*b\n")),(0,l.kt)("p",null,"As apparent this is a script that multiplies 2 variables - ",(0,l.kt)("inlineCode",{parentName:"p"},"a")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"b")," and sets the result to another variable ",(0,l.kt)("inlineCode",{parentName:"p"},"r"),".\nAssume that we are invoking this script from another script and we want to pass in ",(0,l.kt)("inlineCode",{parentName:"p"},"a")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"b")," and then get the ",(0,l.kt)("inlineCode",{parentName:"p"},"r")," value back.\nThe script below shows a sample that calls this library script (named CALC):"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'from java.util import HashMap\n\nmap = HashMap()\nmap.put("a",2)\nmap.put("b",3)\nservice.invokeScript("CALC",map)\nres = map.get("r")\n')),(0,l.kt)("p",null,"As you can see, the calling script leverages the implicit ",(0,l.kt)("inlineCode",{parentName:"p"},"service")," variable (available to all scripts) toinvoke the library script named CALC.\nIt also passes in the ",(0,l.kt)("inlineCode",{parentName:"p"},"a")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"b")," as a Map object to the script. The response ",(0,l.kt)("inlineCode",{parentName:"p"},"r")," is recovered from that same Map object.\nWhile this way works, it has a few downsides."),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"It does not allow the library script to have multiple functions - thus becoming a true utility script. In this model you will be forced to create many such library scripts - each for one utility."),(0,l.kt)("li",{parentName:"ol"},"The calling script spends bunch of code to just to setup the library script call dealing with java imports and java data structures.")),(0,l.kt)("p",null,"Below we demonstrate a simpler way to do the same, but also help the library scripts to be function based."),(0,l.kt)("p",null,"We will rewrite the CALC script like below"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},"def mult(a,b):\n  return a*b\n  \n def add(a,b):\n  return a+b\n")),(0,l.kt)("p",null,"As you can see that now we can accomodate multiple utility modules in one library script. Now the calling script is shown below:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-python"},'res = service.invokeScript("CALC","mult",[2,3])\n')),(0,l.kt)("p",null,"As you can see this reduces the number of code lines significantly and also does away with those java Map imports and instead leveraes the native language (py) to do it all.\nIt also helps make the code more readable. Now we understand that these are just samples meant to demonstrate the library script concept and how ",(0,l.kt)("inlineCode",{parentName:"p"},"service")," is leveraged to invoke those.\nThe real life examples would certainly include reusable business logic inside the library scripts."),(0,l.kt)("p",null,"Note that for this, we did not need to import or make any new py/js modules - its all natively handled by Maximo.\nThe library scripts are no different that any other scripts in terms of stoarge/caching/compilation etc."))}p.isMDXComponent=!0},4295:function(e,t,a){a.d(t,{Z:function(){return f}});var n=a(7294),l=a(8650),r=a.n(l),i=a(5444),s=a(6949),o=a(3293),c=a(5900),p=a.n(c),m=function(e){var t,a=e.title,l=e.theme,r=e.tabs,i=void 0===r?[]:r;return n.createElement("div",{className:p()("PageHeader-module--page-header--NqfPe",(t={},t["PageHeader-module--with-tabs--vbQ-W"]=i.length,t["PageHeader-module--dark-mode--WCeH8"]="dark"===l,t))},n.createElement("div",{className:"bx--grid"},n.createElement("div",{className:"bx--row"},n.createElement("div",{className:"bx--col-lg-12"},n.createElement("h1",{id:"page-title",className:"PageHeader-module--text--Er2EO"},a)))))},d=function(e){var t=e.relativePagePath,a=e.repository,l=(0,i.useStaticQuery)("1364590287").site.siteMetadata.repository,r=a||l,s=r.baseUrl,o=r.subDirectory,c=s+"/edit/"+r.branch+o+"/src/pages"+t;return s?n.createElement("div",{className:"bx--row EditLink-module--row--BEmSX"},n.createElement("div",{className:"bx--col"},n.createElement("a",{className:"EditLink-module--link--IDrl1",href:c},"Edit this page on GitHub"))):null},u=a(4275),h=a(1721),b=function(e){function t(){return e.apply(this,arguments)||this}return(0,h.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.title,a=e.tabs,l=e.slug,s=l.split("/").filter(Boolean).slice(-1)[0],o=a.map((function(e){var t,a=r()(e,{lower:!0,strict:!0}),o=a===s,c=new RegExp(s+"/?(#.*)?$"),m=l.replace(c,a);return n.createElement("li",{key:e,className:p()((t={},t["PageTabs-module--selected-item--aBB0K"]=o,t),"PageTabs-module--list-item--024o6")},n.createElement(i.Link,{className:"PageTabs-module--link--Kz-7R",to:""+m},e))}));return n.createElement("div",{className:"PageTabs-module--tabs-container--Cdfzw"},n.createElement("div",{className:"bx--grid"},n.createElement("div",{className:"bx--row"},n.createElement("div",{className:"bx--col-lg-12 bx--col-no-gutter"},n.createElement("nav",{"aria-label":t},n.createElement("ul",{className:"PageTabs-module--list--xLqxG"},o))))))},t}(n.Component),g=b,w=a(2881),k=a(6958),v=a(36),y=function(e){var t=e.date,a=new Date(t);return t?n.createElement(v.X2,{className:"last-modified-date-module--row--XJoYQ"},n.createElement(v.sg,null,n.createElement("div",{className:"last-modified-date-module--text--ogPQF"},"Page last updated: ",a.toLocaleDateString("en-GB",{day:"2-digit",year:"numeric",month:"long"})))):null},f=function(e){var t=e.pageContext,a=e.children,l=e.location,c=e.Title,p=t.frontmatter,h=void 0===p?{}:p,b=t.relativePagePath,v=t.titleType,f=h.tabs,N=h.title,E=h.theme,C=h.description,x=h.keywords,P=h.date,T=(0,k.Z)().interiorTheme,L=(0,i.useStaticQuery)("2456312558").site.pathPrefix,j=L?l.pathname.replace(L,""):l.pathname,A=f?j.split("/").filter(Boolean).slice(-1)[0]||r()(f[0],{lower:!0}):"",M=E||T;return n.createElement(o.Z,{tabs:f,homepage:!1,theme:M,pageTitle:N,pageDescription:C,pageKeywords:x,titleType:v},n.createElement(m,{title:c?n.createElement(c,null):N,label:"label",tabs:f,theme:M}),f&&n.createElement(g,{title:N,slug:j,tabs:f,currentTab:A}),n.createElement(w.Z,{padded:!0},a,n.createElement(d,{relativePagePath:b}),n.createElement(y,{date:P})),n.createElement(u.Z,{pageContext:t,location:l,slug:j,tabs:f,currentTab:A}),n.createElement(s.Z,null))}}}]);
//# sourceMappingURL=component---src-pages-coreconcepts-libraryscripts-mdx-0261110c410aa01896ae.js.map