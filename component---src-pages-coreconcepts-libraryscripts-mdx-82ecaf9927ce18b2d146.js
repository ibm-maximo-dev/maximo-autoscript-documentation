"use strict";(self.webpackChunkmas_playbook=self.webpackChunkmas_playbook||[]).push([[3060],{3221:function(e,t,a){a.r(t),a.d(t,{_frontmatter:function(){return s},default:function(){return p}});var n=a(3366),r=(a(7294),a(4983)),l=a(4295),i=["components"],s={},o={_frontmatter:s},c=l.Z;function p(e){var t=e.components,a=(0,n.Z)(e,i);return(0,r.kt)(c,Object.assign({},o,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",null,"Library script"),(0,r.kt)("p",null,"Library scripts are good for encapsulating some re-usable logic. From Maximo 7.6 onwards, you can write those reusable blocks as\nlibrary scripts, which are just simple scripts with no launch points. You can then leverage the ",(0,r.kt)("inlineCode",{parentName:"p"},"service")," variable to invoke those library scripts from another script.\nLibrary scripts have undergone some improvements over the last few releases.\nThe following simple example showcases the change in usage:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"r=a*b\n")),(0,r.kt)("p",null,"This is a script that multiplies two variables - ",(0,r.kt)("inlineCode",{parentName:"p"},"a")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"b")," and sets the result to another variable ",(0,r.kt)("inlineCode",{parentName:"p"},"r"),".\nAssume that you are invoking this script from another script and you want to pass in ",(0,r.kt)("inlineCode",{parentName:"p"},"a")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"b")," and then get the ",(0,r.kt)("inlineCode",{parentName:"p"},"r")," value back.\nThe following script shows a sample that calls this library script (named CALC):"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'from java.util import HashMap\n\nmap = HashMap()\nmap.put("a",2)\nmap.put("b",3)\nservice.invokeScript("CALC",map)\nres = map.get("r")\n')),(0,r.kt)("p",null,"The calling script leverages the implicit ",(0,r.kt)("inlineCode",{parentName:"p"},"service")," variable (available to all scripts) to invoke the library script named CALC.\nIt also passes in the ",(0,r.kt)("inlineCode",{parentName:"p"},"a")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"b")," as a Map object to the script. The response ",(0,r.kt)("inlineCode",{parentName:"p"},"r")," is recovered from that same Map object.\nWhile this way works, it has a few downsides."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"It does not allow the library script to have multiple functions, becoming a true utility script. In this model you will be forced to create many such library scripts - each for one utility."),(0,r.kt)("li",{parentName:"ol"},"The calling script spends a lot of code to setup the library script call dealing with java imports and java data structures.")),(0,r.kt)("p",null,"The following example shows a simpler way to rewrite the CALC script, while helping the library scripts to be function based:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"def mult(a,b):\n  return a*b\n  \n def add(a,b):\n  return a+b\n")),(0,r.kt)("p",null,"Now it is possible to accommodate multiple utility modules in one library script. The following calling script can be used:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'res = service.invokeScript("CALC","mult",[2,3])\n')),(0,r.kt)("p",null,"This reduces the number of code lines significantly and removes the java Map imports, instead leveraging the native language (py) to do it all.\nIt also helps make the code more readable. These are just samples meant to demonstrate the library script concept and how ",(0,r.kt)("inlineCode",{parentName:"p"},"service")," is leveraged to invoke those.\nThe real life examples would certainly include reusable business logic inside the library scripts."),(0,r.kt)("p",null,"For the script, there was no need to import or make any new py/js modules - it is all natively handled by Maximo.\nThe library scripts are no different that any other scripts in terms of storage, caching, compilation, and other aspects."))}p.isMDXComponent=!0},4295:function(e,t,a){a.d(t,{Z:function(){return w}});var n=a(7294),r=a(8650),l=a.n(r),i=a(5444),s=a(6949),o=a(3293),c=a(5900),p=a.n(c),m=function(e){var t,a=e.title,r=e.theme,l=e.tabs,i=void 0===l?[]:l;return n.createElement("div",{className:p()("PageHeader-module--page-header--NqfPe",(t={},t["PageHeader-module--with-tabs--vbQ-W"]=i.length,t["PageHeader-module--dark-mode--WCeH8"]="dark"===r,t))},n.createElement("div",{className:"bx--grid"},n.createElement("div",{className:"bx--row"},n.createElement("div",{className:"bx--col-lg-12"},n.createElement("h1",{id:"page-title",className:"PageHeader-module--text--Er2EO"},a)))))},d=function(e){var t=e.relativePagePath,a=e.repository,r=(0,i.useStaticQuery)("1364590287").site.siteMetadata.repository,l=a||r,s=l.baseUrl,o=l.subDirectory,c=s+"/edit/"+l.branch+o+"/src/pages"+t;return s?n.createElement("div",{className:"bx--row EditLink-module--row--BEmSX"},n.createElement("div",{className:"bx--col"},n.createElement("a",{className:"EditLink-module--link--IDrl1",href:c},"Edit this page on GitHub"))):null},u=a(4275),h=a(1721),b=function(e){function t(){return e.apply(this,arguments)||this}return(0,h.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.title,a=e.tabs,r=e.slug,s=r.split("/").filter(Boolean).slice(-1)[0],o=a.map((function(e){var t,a=l()(e,{lower:!0,strict:!0}),o=a===s,c=new RegExp(s+"/?(#.*)?$"),m=r.replace(c,a);return n.createElement("li",{key:e,className:p()((t={},t["PageTabs-module--selected-item--aBB0K"]=o,t),"PageTabs-module--list-item--024o6")},n.createElement(i.Link,{className:"PageTabs-module--link--Kz-7R",to:""+m},e))}));return n.createElement("div",{className:"PageTabs-module--tabs-container--Cdfzw"},n.createElement("div",{className:"bx--grid"},n.createElement("div",{className:"bx--row"},n.createElement("div",{className:"bx--col-lg-12 bx--col-no-gutter"},n.createElement("nav",{"aria-label":t},n.createElement("ul",{className:"PageTabs-module--list--xLqxG"},o))))))},t}(n.Component),g=b,v=a(2881),k=a(6958),y=a(36),f=function(e){var t=e.date,a=new Date(t);return t?n.createElement(y.X2,{className:"last-modified-date-module--row--XJoYQ"},n.createElement(y.sg,null,n.createElement("div",{className:"last-modified-date-module--text--ogPQF"},"Page last updated: ",a.toLocaleDateString("en-GB",{day:"2-digit",year:"numeric",month:"long"})))):null},w=function(e){var t=e.pageContext,a=e.children,r=e.location,c=e.Title,p=t.frontmatter,h=void 0===p?{}:p,b=t.relativePagePath,y=t.titleType,w=h.tabs,N=h.title,E=h.theme,C=h.description,T=h.keywords,x=h.date,P=(0,k.Z)().interiorTheme,L=(0,i.useStaticQuery)("2456312558").site.pathPrefix,j=L?r.pathname.replace(L,""):r.pathname,M=w?j.split("/").filter(Boolean).slice(-1)[0]||l()(w[0],{lower:!0}):"",Z=E||P;return n.createElement(o.Z,{tabs:w,homepage:!1,theme:Z,pageTitle:N,pageDescription:C,pageKeywords:T,titleType:y},n.createElement(m,{title:c?n.createElement(c,null):N,label:"label",tabs:w,theme:Z}),w&&n.createElement(g,{title:N,slug:j,tabs:w,currentTab:M}),n.createElement(v.Z,{padded:!0},a,n.createElement(d,{relativePagePath:b}),n.createElement(f,{date:x})),n.createElement(u.Z,{pageContext:t,location:r,slug:j,tabs:w,currentTab:M}),n.createElement(s.Z,null))}}}]);
//# sourceMappingURL=component---src-pages-coreconcepts-libraryscripts-mdx-82ecaf9927ce18b2d146.js.map