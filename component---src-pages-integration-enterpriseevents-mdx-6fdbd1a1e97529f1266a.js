"use strict";(self.webpackChunkmas_playbook=self.webpackChunkmas_playbook||[]).push([[2284],{4807:function(e,t,a){a.r(t),a.d(t,{_frontmatter:function(){return l},default:function(){return p}});var r=a(3366),n=(a(7294),a(4983)),o=a(4295),i=["components"],l={},s={_frontmatter:l},m=o.Z;function p(e){var t=e.components,a=(0,r.Z)(e,i);return(0,n.kt)(m,Object.assign({},s,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"Enterprise Services provide the inbound integration backbone of Maximo. They represent the internal implementation for all kinds of services that MIF offers -\nXML/HTTP, SOAP, Flat Files, Interface tables to name a few. Enterprise services may or maynot be async ie they can optionally leverage the queues.",(0,n.kt)("br",{parentName:"p"}),"\n","Enterprise services are also used for Data import from UI as well as cron jobs (File, Interface Tables).\nIf the service is async, the Enterprise service execution starts after the messages get picked up from those queues and\nget pushed downstream. Like its outbound equivalent (Publish Channel), Enterprise Services are used to transform data from external format to Maximo format - json or xml.",(0,n.kt)("br",{parentName:"p"}),"\n","Enterprise Services support the below script points:"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"Script Point"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Purpose"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"External Exits"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Used for data transformation of inbound messages from External format (",(0,n.kt)("inlineCode",{parentName:"td"},"erData"),") to internal Maximo format ",(0,n.kt)("inlineCode",{parentName:"td"},"irData"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"User Exit (Before External Exit)"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Used for data modification before it reches the External Exit (",(0,n.kt)("inlineCode",{parentName:"td"},"erData"),").")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"User Exit (After External Exit)"),(0,n.kt)("td",{parentName:"tr",align:"left"},"Used data transaformation from the output of the External Exit to target maximo format.")))),(0,n.kt)("p",null,"The table below lists the variables available "),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:"left"},"Variable"),(0,n.kt)("th",{parentName:"tr",align:"left"},"Purpose"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"erData"),(0,n.kt)("td",{parentName:"tr",align:"left"},"an instance of psdi.iface.mic.StructureData used to hold the external document. Available for all 3 exits.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"irData"),(0,n.kt)("td",{parentName:"tr",align:"left"},"an instance of psdi.iface.mic.StructureData used to hold the internal (maximo format) document. This is set to null (as input) for External Exit and Before User Exit. External exits are expected to set the ",(0,n.kt)("inlineCode",{parentName:"td"},"irData")," by transforming the ",(0,n.kt)("inlineCode",{parentName:"td"},"erData"),".")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"ifaceType"),(0,n.kt)("td",{parentName:"tr",align:"left"},"The interface type name.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"ifaceName"),(0,n.kt)("td",{parentName:"tr",align:"left"},"The channel name.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"osName"),(0,n.kt)("td",{parentName:"tr",align:"left"},"The Object Structure name.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"messageType"),(0,n.kt)("td",{parentName:"tr",align:"left"},"The message type which can have values like Sync/Create/Update/Delete.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"extSystem"),(0,n.kt)("td",{parentName:"tr",align:"left"},"The external system name.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"userInfo"),(0,n.kt)("td",{parentName:"tr",align:"left"},"The UserInfo object representing the authentocated user that invoked this service.")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:"left"},"conn"),(0,n.kt)("td",{parentName:"tr",align:"left"},"The jdbc Connection object.")))),(0,n.kt)("p",null,"Below is an example of a After user exit script that sets the wopriority to an inbound WO transaction."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},'if irData.getCurrentData("vendor")=="A0001" and irData.isCurrentDataNull("wopriority")==True:\n  irData.setCurrentDataAsInt("wopriority",1)\n')),(0,n.kt)("p",null,"Note that the “After User Exit” for Enterprise service would work with the ",(0,n.kt)("inlineCode",{parentName:"p"},"irData")," (internal maximo format data)\nas the inbound External exit would have mapped the external format to internal format.\nAnother example of a before user exit is shown below. Here the script decides to skip the transaction when a certainm condition is met."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},'from org.jdom import Namespace\n\ndoc = erData.getData()\nextXMLRoot = doc.getRootElement()\norgname = extXMLRoot.getChildText("orgname", Namespace.getNamespace("http://some_ns.org"))\nif orgname=="somevalue":\n  service.raiseSkipTransaction()\n')),(0,n.kt)("p",null,"As apparent, the Before User Exit has access to only the ",(0,n.kt)("inlineCode",{parentName:"p"},"erData")," variable that contains the external document.\nIn this case the external document is XML and the api to access that as a JDOM document is ",(0,n.kt)("inlineCode",{parentName:"p"},"erData.getData()"),".\nNote that had this been an json document, we would need to use a differe api to get the json data. The below script is an example of that:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},'from com.ibm.tivoli.maximo.oslc import OslcUtils\njsonData = OslcUtils.byteToJson(erData.getOriginalByteData())\n\norgname = jsonData.get("orgname")\nif orgname=="somevalue":\n  service.raiseSkipTransaction()\n')),(0,n.kt)("p",null,"An example for External Exit Script that cretes a Maximo companies by mapping external data to to MXVENDOR Object Structure is shown below:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-python"},'from psdi.iface.mic import EnterpriseServiceCache\nfrom psdi.server import MXServer\nfrom org.jdom import Namespace\n\ndoc = erData.getData()\nextXMLRoot = doc.getRootElement()\nvendor = extXMLRoot.getChildText("vendor", Namespace.getNamespace("http://some_ns.org"))\norganization = extXMLRoot.getChildText("organization", Namespace.getNamespace("http://some_ns.org"))\nsrv = EnterpriseServiceCache.getInstance().getEnterpriseServiceInfo("MXVENDORInterface")\nchangeBy = extXMLRoot.getChildText("user", Namespace.getNamespace("http://some_ns.org"))\nirData = StructureData(srv.getMessageType(), srv.getMosName(), userInfo.getLangCode(), 1, false, false)\nirData.setCurrentData("COMPANY", vendor)\nirData.setCurrentData("ORGID", organization)\nirData.setCurrentData("CHANGEBY", changeBy)\nirData.setCurrentData("CHANGEDATE", MXServer.getMXServer().getDate())\n')))}p.isMDXComponent=!0},4295:function(e,t,a){a.d(t,{Z:function(){return E}});var r=a(7294),n=a(8650),o=a.n(n),i=a(5444),l=a(6949),s=a(3293),m=a(5900),p=a.n(m),c=function(e){var t,a=e.title,n=e.theme,o=e.tabs,i=void 0===o?[]:o;return r.createElement("div",{className:p()("PageHeader-module--page-header--NqfPe",(t={},t["PageHeader-module--with-tabs--vbQ-W"]=i.length,t["PageHeader-module--dark-mode--WCeH8"]="dark"===n,t))},r.createElement("div",{className:"bx--grid"},r.createElement("div",{className:"bx--row"},r.createElement("div",{className:"bx--col-lg-12"},r.createElement("h1",{id:"page-title",className:"PageHeader-module--text--Er2EO"},a)))))},d=function(e){var t=e.relativePagePath,a=e.repository,n=(0,i.useStaticQuery)("1364590287").site.siteMetadata.repository,o=a||n,l=o.baseUrl,s=o.subDirectory,m=l+"/edit/"+o.branch+s+"/src/pages"+t;return l?r.createElement("div",{className:"bx--row EditLink-module--row--BEmSX"},r.createElement("div",{className:"bx--col"},r.createElement("a",{className:"EditLink-module--link--IDrl1",href:m},"Edit this page on GitHub"))):null},u=a(4275),f=a(1721),g=function(e){function t(){return e.apply(this,arguments)||this}return(0,f.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.title,a=e.tabs,n=e.slug,l=n.split("/").filter(Boolean).slice(-1)[0],s=a.map((function(e){var t,a=o()(e,{lower:!0,strict:!0}),s=a===l,m=new RegExp(l+"/?(#.*)?$"),c=n.replace(m,a);return r.createElement("li",{key:e,className:p()((t={},t["PageTabs-module--selected-item--aBB0K"]=s,t),"PageTabs-module--list-item--024o6")},r.createElement(i.Link,{className:"PageTabs-module--link--Kz-7R",to:""+c},e))}));return r.createElement("div",{className:"PageTabs-module--tabs-container--Cdfzw"},r.createElement("div",{className:"bx--grid"},r.createElement("div",{className:"bx--row"},r.createElement("div",{className:"bx--col-lg-12 bx--col-no-gutter"},r.createElement("nav",{"aria-label":t},r.createElement("ul",{className:"PageTabs-module--list--xLqxG"},s))))))},t}(r.Component),h=g,N=a(2881),k=a(6958),b=a(36),x=function(e){var t=e.date,a=new Date(t);return t?r.createElement(b.X2,{className:"last-modified-date-module--row--XJoYQ"},r.createElement(b.sg,null,r.createElement("div",{className:"last-modified-date-module--text--ogPQF"},"Page last updated: ",a.toLocaleDateString("en-GB",{day:"2-digit",year:"numeric",month:"long"})))):null},E=function(e){var t=e.pageContext,a=e.children,n=e.location,m=e.Title,p=t.frontmatter,f=void 0===p?{}:p,g=t.relativePagePath,b=t.titleType,E=f.tabs,v=f.title,y=f.theme,D=f.description,T=f.keywords,w=f.date,C=(0,k.Z)().interiorTheme,P=(0,i.useStaticQuery)("2456312558").site.pathPrefix,M=P?n.pathname.replace(P,""):n.pathname,S=E?M.split("/").filter(Boolean).slice(-1)[0]||o()(E[0],{lower:!0}):"",X=y||C;return r.createElement(s.Z,{tabs:E,homepage:!1,theme:X,pageTitle:v,pageDescription:D,pageKeywords:T,titleType:b},r.createElement(c,{title:m?r.createElement(m,null):v,label:"label",tabs:E,theme:X}),E&&r.createElement(h,{title:v,slug:M,tabs:E,currentTab:S}),r.createElement(N.Z,{padded:!0},a,r.createElement(d,{relativePagePath:g}),r.createElement(x,{date:w})),r.createElement(u.Z,{pageContext:t,location:n,slug:M,tabs:E,currentTab:S}),r.createElement(l.Z,null))}}}]);
//# sourceMappingURL=component---src-pages-integration-enterpriseevents-mdx-6fdbd1a1e97529f1266a.js.map